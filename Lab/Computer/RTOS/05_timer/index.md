---
title: Arduinoでタイマ割り込み！
---

前回、Arduino で外部割り込みを実装しました。

割り込みは多種多様ですが、一番よく使う割り込みのひとつがタイマ割り込みです。

## タイマ割り込みとは？

マイコンの中には時計があって、電源が入ってからの時間を刻み続けています。

## PWM を自作する

Arduino を使ったことがある人なら、ほぼ全ての人がタイマ割り込みを使ってるはずです。

```C:
analogWrite(pin,duty);
```

PWM 出力をする関数ですが、実はこの中でタイマ割り込みが使われています。

※ Arduino ってこういう低レイヤな部分をうまく隠蔽して初心者に使いやすくしててすごい

Arduino には、3 つのタイマがあります。

|        |       | ピン番号 |
| ------ | ----- | -------- |
| Timer0 | 8bit  | 5,6      |
| Timer1 | 16bit | 9,10     |
| Timer2 | 8bit  | 3,11     |

競合するので、同時には使えません。

※ Leonard など、ATMEGA328 でないマイコンが載ってる Arduino では、違う場合があるので、自分の使ってるチップのデータシートを確認してね！
