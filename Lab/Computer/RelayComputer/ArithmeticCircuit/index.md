% 演算回路
%
%

デジタル回路・アナログ回路

## 演算回路の理論

$N$ 入力 $M$ 出力の演算回路全体の集合を $(2^N\ra 2^M)$ と表す。

### 構成

演算$F=\{f_1,f_2\dots\}$を組み合わせて、ある演算$f$を構成可能であることを、$\{f_1,f_2\dots\} \ra f$と表す。

### 完備性

1. $\{\rm{NOR}\}\ra\{AND,OR,NOT\}$

2. $\{\rm{}AND,OR,NOT\}\ra\{(2\ra2)\}$

3. $\{\rm{}AND,OR,NOT,(2^N\ra2)\}\ra\{(2^{N+1}\ra2)\}$

$F\in(2^{N+1}\ra2)$ の真理値表

| $I_1$ |       | $I_N$ | $I_{N+1}$ | $O$   |
| ----- | ----- | ----- | --------- | ----- |
|       |       |       | 0         | $O^1$ |
|       | $I^1$ |       | 0         | $O^1$ |
|       |       |       | 0         | $O^1$ |
|       |       |       | 1         | $O^2$ |
|       | $I^2$ |       | 1         | $O^2$ |
|       |       |       | 1         | $O^2$ |

$$
F^1(I^1_1\dots I^1_N) = O^1 \\
F^2(I^2_1\dots I^2_N) = O^2
$$

$$
F(I_1\dots I_N , I_{N+1}) = F^1(I_1\dots I_N) \cdot \overline{I_{N+1}} + F^2(I_1\dots I_N) \cdot I_{N+1}
$$

1~3 より、

$$
\{\rm{NOR}\}\ra\forall N\{(2^N\ra2)\}
$$

### 演算回路

ある演算の集合 $F=\{f_1,f_2\dots\}$ をすべてを構成可能な、演算集合 $F_e$ を、（$F$に対する）基本演算集合という。

演算回路を作るということは、目的とする演算 $f$ を、

1. 演算としてふるまう系を探す
2. それらを組み合わせて
3. あ

このような特性を持つ現象を見つけたら、

ある種の「演算」を行っている

さらに、その系の入力を操作できる場合、「演算回路」を作ることができます。

### 回路サイズ

演算 $f$ に必要な基本演算数を評価したい。

### 演算時間

演算 $f$ に必要な時間を評価したい。

一般に演算時間は入力によって変化するので、入力 $a$ に対する演算時間を $T(f,a)$ とする。

入力の確率分布を $P(a)$ としたとき、演算時間の期待値を $T(f,P)=\sum P(a)T(f,a)$ とする。

特に、一様分布に対する演算時間の期待値を $\bar{T}(f)$ とする。

## 群演算器

群 $(2^N,\circ)$

### Prefix Sum

入力列 $a_0,a_1\cdots a_{n-1}$ に対して出力列

$$
s_i = a_0 \circ a_1 \circ a_2 \cdots \circ a_i
$$

を返す演算器を構成する。

$s_i$ を逐次に求めると $n$ 段必要だが、PrefixSum を使うと $\lceil \log n \rceil$ 段で済ませることができる。

## 加算器

### 並列加算器

$$
(g,p)\circ(g',p') = (g + p \cdot g', p \cdot p')
$$

|         |       |       |         |         |
| ------- | ----- | ----- | ------- | ------- |
| (g',p') | (0,0) | (0,1) | (1,0)   | (1,1)   |
| (g,p)   | (g,0) | (g,p) | (g+p,0) | (g+p,p) |
| (0,0)   | (0,0) | (0,0) | (0,0)   | (0,0)   |
| (0,1)   | (0,0) | (0,1) | (1,0)   | (1,1)   |
| (1,0)   | (1,0) | (1,0) | (1,0)   | (1,0)   |
| (1,1)   | (1,0) | (1,1) | (1,0)   | (1,1)   |

$$
\begin{aligned}
(G,P)_0&=(g,p)_0\\
(G,P)_i&=(g,p)_i\circ(G,P)_{i-1}\\
\end{aligned}
$$

|                  |     | 7   | 6   | 5   | 4   | 3   | 2   | 1   | 0   |
| ---------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| $a$              |     | 1   | 1   | 0   | 1   | 1   | 0   | 1   | 0   |
| $b$              |     | 1   | 0   | 1   | 1   | 1   | 1   | 0   | 0   |
| $g = a \cdot b$  |     | 1   | 0   | 0   | 1   | 1   | 0   | 0   | 0   |
| $p = a \oplus b$ |     | 0   | 1   | 1   | 0   | 0   | 1   | 1   | 0   |
| $G$              |     | 1   | 1   | 1   | 1   | 1   | 0   | 0   | 0   |
| $P$              |     | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |
| $s$              | 1   | 1   | 0   | 0   | 1   | 0   | 1   | 1   | 0   |
